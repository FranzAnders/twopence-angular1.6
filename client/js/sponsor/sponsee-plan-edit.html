
<div class="section">

  <div class="row">

    <div class="small-12 medium-4  columns">

      <div class="row">

        <div class="small-12 large-11 large-centered columns">

          <h1 class="txtc2  ff2">
            Manage <br> Matching Plan
          </h1>

          <p>
            Edit
            <span class="fwb" ng-bind="sponseePlanEdit.sponsorship.sponsee.first_name + ' ' + sponseePlanEdit.sponsorship.sponsee.last_name"></span>'s monthly matching limit or pause their existing active matching plan.
          </p>
          
          <div class="sponsorSection-illustrContainer">
            <div class="sponsorSection-illustr  sponsorSection-illustr--managePlan  show-for-medium-up">

            </div>
          </div>

        </div>

      </div>

    </div>

    <div class="small-12 columns medium-8 large-7 large-pull-1">

        <div class="card" >

          <div class="card-header">

            <h1 class="card-title">
              Plan Settings
            </h1>

          </div>

          <div class="card-content  card-content--bordered">

            <div class="grid med-grid--flexDirectionRow grid--flexDirectionColumn grid--justifyCenter med-grid--justifySpaceAround">

              <div  class="grid-cell grid-cell--autoSize">
                <label class="h2  text-center  medium-text-left   card-subTitle"  for="plan_limit" >Monthly Limit</label>
              </div>

              <div class="grid-cell text-center prl3">

                <form ng-submit="sponseePlanEdit.changePlanLimit(sponseePlanEdit.planEditForm, sponseePlanEdit.sponsorship, sponseePlanEdit.customAmount)" name="sponseePlanEdit.planEditForm" novalidate>

                <robust-amount-input-dir ng-model="sponseePlanEdit.customAmount" amount="sponseePlanEdit.customAmount">

                </robust-amount-input-dir>
                <button type="submit" 
                        class="button--micro  button--secondary mb0"
                        ng-if="sponseePlanEdit.planEditForm.$dirty && sponseePlanEdit.planEditForm.$valid && sponseePlanEdit.planStatus !== 'no-plan-created'"
                        ng-hide="sponseePlanEdit.planEditForm.$submitted"
                        ng-class="{'is-inactive' : (!sponseePlanEdit.planEditForm.$dirty || !sponseePlanEdit.planEditForm.$valid)}">
                    Update Matching Limit
                </button>
                </form>

                <button role="button"  class="text-micro  button button--secondary button--medium  button--withIcon"
                   ng-class="{'is-inactive' : (!sponseePlanEdit.planEditForm.$dirty || !sponseePlanEdit.planEditForm.$valid)}"
                   ng-click="sponseePlanEdit.createNewPlan(sponseePlanEdit.sponsorship.id, sponseePlanEdit.newPlanInfo, false, sponseePlanEdit.customAmount)"
                   ng-if="sponseePlanEdit.planStatus === 'no-plan-created'">
                  <span class="button-label">Setup Matching Plan</span>
                </button>

              </div>

            </div>

          </div>


          <div class="card-content" ng-if="sponseePlanEdit.planStatus !== 'no-plan-created' && sponseePlanEdit.planStatus">

            <div class="grid med-grid--flexDirectionRow grid--flexDirectionColumn grid--justifyCenter med-grid--justifySpaceBetween med-grid--top">

              <div class="grid-cell grid-cell--autoSize">
                  <h2 class="text-center  medium-text-left   card-subTitle">Plan Status</h2>
              </div>


              <div class="planStatus grid-cell  grid grid--center grid--justifyCenter grid--flexDirectionColumn text-center med-grid--justifyCenter">

                <div ng-switch="sponseePlanEdit.planStatus">

                  <div ng-switch-when="active" class="tag  tag--large tag--active  planStatus-status">
                    Active
                  </div>

                  <div ng-switch-when="inactive" class="tag  tag--large  tag--inactive  planStatus-status">
                      Inactive
                  </div>

                  <div ng-switch-when="deactivating" class="tag  tag--large  tag--inactive  planStatus-status">
                      Inactive
                  </div>

                  <div ng-switch-when="activating" class="tag tag--large tag--pending  planStatus-status">
                    Activating
                  </div>

                  <div  ng-switch-when="invite pending" class="tag  tag--large  tag--pending  planStatus-status">Invite Pending</div>

                </div>

  
                <button role="button" class="text-micro  planStatus-action"
                  ng-click="sponseePlanEdit.pausePlan(sponseePlanEdit.sponsorship)"
                  ng-if="sponseePlanEdit.planStatus === 'active'">

                   <svg class="icon">
                    <use xlink:href="#icon-Pause"/>
                
                  </svg>
                  
                  <span class="label"> Deactivate Plan</span>
                </button>

                <button role="button"  class="text-micro  planStatus-action"
                   ng-click="sponseePlanEdit.resumePlan(sponseePlanEdit.sponsorship)"
                   ng-if="sponseePlanEdit.planStatus === 'inactive' || sponseePlanEdit.planStatus === 'deactivating'">

                  <svg class="icon">
                    <use xlink:href="#icon-resume"/>
                
                  </svg>

                  <span class="label"> Activate Plan</span>
                </button>

                <button  role="button" class="text-micro  planStatus-action"
                   ng-click="sponseePlanEdit.cancelActivation(sponseePlanEdit.sponsorship)"
                   ng-if="sponseePlanEdit.planStatus === 'activating'">

                  <svg class="icon">
                    <use xlink:href="#icon-Decline"/>
                
                  </svg>

                  <span class="label"> Cancel Activation</span>
                </button>


                <span class="text-mini" ng-if="sponseePlanEdit.planStatus === 'activating'">
                 Plan will be effective starting tomorrow.
                </span>

                </div>


             </div>

            </div>

          </div>
        
      </div>

    </div>

  </div>

</div>
